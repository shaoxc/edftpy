image: registry.gitlab.com/pavanello-research-group/dftpy:latest

Test:
  before_script:
    #- git clone -b mpi2 https://gitlab.com/pavanello-research-group/dftpy.git
    - git clone -b new_functional_class https://gitlab.com/pavanello-research-group/dftpy.git
    - home=$( pwd )
    - cd dftpy
    - python setup.py install --user
    - cd ..
  script:
   - python setup.py install --user
   - cd examples
   - EDFTPY_DATA_PATH='./DATA/' pytest --cov-report term-missing --cov=./ ./test/
  coverage: '/TOTAL\s+\d+\s+\d+\s+(\d+\%)/'
